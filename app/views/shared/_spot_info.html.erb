<% puts "mode: #{mode}" %>
<% if @spots.present? %>
  <% @spots.each do |spot| %>
    <!-- 各投稿のカード -->
    <div class="bg-white border-2 border-orange-400 rounded-md px-4 shadow flex items-center justify-between">

      <!-- 左：スポット情報 -->
      <div class="text-sm space-y-1">
        <p class="font-bold">スポット名：</p>
        <p class="font-bold"><%= spot.name %></p>
          <p class="font-bold">市区町村：</p>
          <p class="font-bold"><%= spot.address || "住所が取得できませんでした" %></p>
        <% if mode == "favorites" %>
          <%= link_to "スポット詳細へ", spot_path(spot), class: "font-bold text-blue-500 underline" %>
        <% end %>

      </div>
      
      <!-- 右側 -->
      <div class="flex flex-row">
        <!-- 画像 -->
        <div class="w-30 h-30 bg-gray-300 mx-4 flex items-center justify-center overflow-hidden rounded">
          <% if spot.spot_image.attached? %>
            <%= image_tag url_for(spot.spot_image), class: "w-full h-full object-cover" %>
          <% else %>
            <span class="text-gray-600 text-sm">画像</span>
          <% end %>
        </div>

        <% if mode == "index" %>
          <!-- ボタン -->
          <div class="flex flex-col items-center justify-center space-y-2">
            <%= link_to "編集", edit_your_spot_path(spot), 
                                class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 rounded text-xs text-center" %>
            <%= button_to "削除", your_spot_path(spot), 
                                  method: :delete, 
                                  data: { confirm: "本当に削除しますか？" }, 
                                  class: "bg-red-500 hover:bg-red-600 text-white px-4 py-1 rounded text-xs text-center" %>
          </div>

        <% elsif mode == "favorites" %>
          <div class="flex flex-col items-center justify-center space-y-2">
            <%= render 'shared/favorites/favorite_button', { spot: spot } %>
          </div>
        <% end %>
      </div>

    </div>
  <% end %>
  <div class>
    <%= paginate @spots %>
  </div>
<% else %>
  <p>登録したスポットはありません。</p>
<% end %>